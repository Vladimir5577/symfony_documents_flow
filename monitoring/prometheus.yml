# Prometheus: сбор метрик по внутренней Docker-сети (project-net).
# Запуск: сначала основной проект (docker compose up -d), затем мониторинг (docker compose -f docker-compose.monitoring.yml up -d).

global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # Метрики PostgreSQL (соединения, запросы, медленные запросы и т.д.)
  - job_name: 'postgres'
    static_configs:
      - targets: ['postgres-exporter:9187']

  # Метрики Nginx: количество запросов к серверу, соединения (читается из stub_status)
  - job_name: 'nginx'
    static_configs:
      - targets: ['nginx-exporter:9113']
