{% extends 'base_dashboard.html.twig' %}

{% block title %}Канбан личные проекты!{% endblock %}



{% block sidebar_list %}
    {% include 'sidebar/sidebar_list.html.twig' %}
{% endblock %}



{% block main %}
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h1 class="mb-0">Личные проекты</h1>
        {% if is_granted('ROLE_ADMIN') %}
            <a href="#" class="btn btn-primary">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
                Создать личный проект
            </a>
        {% endif %}
    </div>

    {% set demo_projects = [
        { id: 1, name: 'Редизайн лендинга', status: 'active', tasksCount: 12, createdAt: '15.02.2025', description: 'Обновление главной страницы и форм' },
        { id: 2, name: 'Мобильное приложение', status: 'active', tasksCount: 8, createdAt: '20.01.2025', description: 'MVP для iOS и Android' },
        { id: 3, name: 'Документация API', status: 'completed', tasksCount: 5, createdAt: '10.12.2024', description: 'OpenAPI и примеры запросов' },
        { id: 4, name: 'Интеграция с 1С', status: 'active', tasksCount: 24, createdAt: '05.02.2025', description: 'Выгрузка документов и справочников' },
    ] %}

    <section class="section" id="projects-table-section">
        <div class="card">
            <div class="card-content">
                <div class="table-responsive">
                    <table class="table table-hover mb-0">
                        <thead>
                            <tr>
                                <th>Название</th>
                                <th>Описание</th>
                                <th>Создан</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for project in demo_projects %}
                                <tr data-href="#" role="button" tabindex="0" class="project-row">
                                    <td>{{ project.name }}</td>
                                    <td class="text-muted">{{ project.description }}</td>
                                    <td>{{ project.createdAt }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>

    <script>
        document.querySelectorAll('#projects-table-section tr[data-href]').forEach(function(row) {
            row.addEventListener('click', function() { window.location.href = this.dataset.href; });
            row.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); window.location.href = this.dataset.href; }
            });
        });
    </script>
    <style>#projects-table-section tr[data-href] { cursor: pointer; }</style>
{% endblock %}
